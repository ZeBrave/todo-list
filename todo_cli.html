<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Todo List</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
    body {
        margin: 0;
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #8a2be2, #4c6ef5);
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        padding: 50px 10px;
        color: #222;
    }
    .card {
        width: 100%;
        max-width: 500px;
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    }
    h1 {
        text-align: center;
        color: #4c6ef5;
        margin-bottom: 20px;
    }
    .input-row { display: flex; gap: 10px; margin-bottom: 20px; }
    input { flex: 1; padding: 12px; font-size: 16px; border-radius: 10px; border: 2px solid #d0d0d0; outline: none; }
    input:focus { border-color: #4c6ef5; }
    button { padding: 12px 18px; border-radius: 10px; border: none; background: #4c6ef5; color: white; cursor: pointer; transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease; }
    button:hover { transform: scale(1.05); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
    button:active { transform: scale(0.95); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    ul { list-style: none; padding: 0; max-height: 50vh; overflow-y: auto; }
    li { background: #f1f3f5; padding: 14px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
    li.done { background: #d3f9d8; text-decoration: line-through; opacity: 0.7; }
    .delete-btn { background: #fa5252; border: none; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; }
    .volume-box {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 999;
        background: rgba(255,255,255,0.7);
        padding: 10px 15px;
        border-radius: 12px;
        backdrop-filter: blur(5px);
        display: flex;
        flex-direction: column;
        gap: 5px;
    }
</style>
</head>
<body>

<!-- Contrôles musique -->
<div class="volume-box">
    <button id="playBtn">▶ Play</button>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.4">
</div>

<audio id="bgMusic" loop>
    <!-- Remplacez le src par votre fichier MP3 local si vous en avez -->
    <source src="disiz, Theodora - melodrama (ParolesLyrics).mp3" type="audio/mp3">
</audio>

<div class="card">
    <h1>✨ Ma liste de tâches</h1>
    <div class="input-row">
        <input type="text" id="taskInput" placeholder="Ajouter une nouvelle tâche...">
        <button id="addBtn">+</button>
    </div>
    <ul id="taskList"></ul>
</div>

<script>
/* ======================
   MUSIQUE
====================== */
const music = document.getElementById("bgMusic");
const slider = document.getElementById("volumeSlider");
const playBtn = document.getElementById("playBtn");

music.volume = 0.4;

// Slider volume
slider.addEventListener("input", ()=>{ music.volume = slider.value; });

// Bouton Play / Pause
playBtn.addEventListener("click", ()=>{
    if(music.paused){
        music.play();
        playBtn.textContent = "⏸ Pause";
    } else {
        music.pause();
        playBtn.textContent = "▶ Play";
    }
});

/* ======================
   TODO
====================== */
const taskList = document.getElementById("taskList");
const addBtn = document.getElementById("addBtn");
const input = document.getElementById("taskInput");

document.addEventListener("DOMContentLoaded", loadTasks);

// Ajouter tâche au clic
addBtn.addEventListener("click", addTask);

// Ajouter tâche avec Enter
input.addEventListener("keydown", (e)=>{
    if(e.key === "Enter") addTask();
});

function addTask(){
    const text = input.value.trim();
    if(!text) return;
    createTaskElement(text);
    saveTask(text);
    input.value = "";
}

function createTaskElement(text, isDone=false){
    const li = document.createElement("li");
    if(isDone) li.classList.add("done");
    li.innerHTML = `<span onclick="toggleDone(this)">${text}</span>
                    <button class="delete-btn" onclick="removeTask(this)">✖</button>`;
    taskList.appendChild(li);
}

function removeTask(button){
    const text = button.parentElement.querySelector("span").innerText;
    deleteTask(text);
    button.parentElement.remove();
}

function toggleDone(span){
    const li = span.parentElement;
    li.classList.toggle("done");
    updateTask(span.innerText, li.classList.contains("done"));
}

function saveTask(text){
    const tasks = JSON.parse(localStorage.getItem("tasks")||"[]");
    tasks.push({text, done:false});
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

function deleteTask(text){
    let tasks = JSON.parse(localStorage.getItem("tasks")||"[]");
    tasks = tasks.filter(t=>t.text!==text);
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

function updateTask(text, doneStatus){
    const tasks = JSON.parse(localStorage.getItem("tasks")||"[]");
    const task = tasks.find(t=>t.text===text);
    if(task) task.done = doneStatus;
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

function loadTasks(){
    const tasks = JSON.parse(localStorage.getItem("tasks")||"[]");
    tasks.forEach(t=>createTaskElement(t.text,t.done));
}
</script>

</body>
</html>
